<?xml version="1.0" encoding="UTF-8"?>
<!-- 
 - FreiDi-scoreFollowsAudio
 - Copyright Benjamin W. Bohl 2014.
 - bohl(at)edirom.de
 -
 - https://github.com/Freischuetz-Digital/scoreFollowsAudio
 - 
 - ## Description & License
 - 
 - This file implements a demo for facsimile page turning
 -
 - This program is free software: you can redistribute it and/or modify
 - it under the terms of the GNU General Public License as published by
 - the Free Software Foundation, either version 3 of the License, or
 - (at your option) any later version.
 :
 - This program is distributed in the hope that it will be useful,
 - but WITHOUT ANY WARRANTY; without even the implied warranty of
 - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 - GNU General Public License for more details.
 -
 - You should have received a copy of the GNU General Public License
 - along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>FreiDi Web-Demo: Audio Score Following</title>
      <script type="text/javascript" src="../dist/bower.js"/>
      <script type="text/javascript" src="../dist/FreiDi-scoreFollowsAudio.min.js"/>
    </head>
  <body><!-- onload="appendAudio()" klappt nicht in zus mit .bind timeupdate -->
    <section id="facsimile">
      <header>Facsimile</header>
      <!--<canvas id="myCanvas" width="710" height="533"
        style="border:1px solid #000000;">
      </canvas> -->
      <img id="currentImage" src="http://freischuetz-digital.de/digilib/Scaler/freidi/sources/A/00000100.jpg?dw=710&amp;mo=fit"/>
      <div id="facsimileID"></div>
    </section>  
    <section id="audioDiv">
        <h1>Audio</h1>
        
        <div>
          <header>Measure:</header>
          count: <div id="measureCount"></div>
          time: <div id="currentTime"></div>
          id: <div id="measureID"></div>
        </div>
        
        <audio id="track" controls="controls">
          <source src="../Weber_Freischuetz-06_FreiDi.mp3" type="audio/mpeg" style="width:100px; height:10px;"/>
          Your browser does not support the HTML5 audio element.
        </audio>
      </section>
      <script type="text/javascript">
        //set currentImage to default value
        var currentImageUri = 'sources/A/00000100.jpg';
        //declare variable json
        var json;
        //get JSON and assign response to var json and log data
        $.getJSON('../Weber_Freischuetz-06_FreiDi_annoMeasures.json', function(data){json = data; console.log(data);}, 'json');
        
        //bind function to timeupdate of audio element
        $("#track").bind('timeupdate', function() {
          var blah = this.currentTime; 
          $("#currentTime").text(blah);
          getMeasure(blah);
        });
      </script>
    </body>
</html>